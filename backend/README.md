# SmartCRM Backend API

REST API backend –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º —Ü–µ–Ω—Ç—Ä–æ–º SmartCRM.

## üõ† Tech Stack

- **Go 1.21+** - –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **Gin** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **PostgreSQL 15+** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **JWT** - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **Zap** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **gofpdf** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **excelize** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è Excel —Ñ–∞–π–ª–æ–≤

## üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- JWT —Ç–æ–∫–µ–Ω—ã —Å refresh –º–µ—Ö–∞–Ω–∏–∑–º–æ–º
- Email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ email
- RBAC —Å–∏—Å—Ç–µ–º–∞ (—Ä–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞)
- –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å (–∏–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ –∫–æ–º–ø–∞–Ω–∏—è–º)

### –ú–æ–¥—É–ª–∏
- **–°—Ç—É–¥–µ–Ω—Ç—ã** - CRUD, –±–∞–ª–∞–Ω—Å—ã, –∏—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –∑–∞–º–µ—Ç–∫–∏
- **–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏** - CRUD, —Å—Ç–∞—Ç—É—Å—ã, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å
- **–ì—Ä—É–ø–ø—ã** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
- **–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ** - —É—Ä–æ–∫–∏, –∫–∞–ª–µ–Ω–¥–∞—Ä—å, –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
- **–§–∏–Ω–∞–Ω—Å—ã** - —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –±–∞–ª–∞–Ω—Å—ã, –¥–æ–ª–≥–∏, —Ç–∞—Ä–∏—Ñ—ã, —Å–∫–∏–¥–∫–∏
- **–ê–±–æ–Ω–µ–º–µ–Ω—Ç—ã** - —Ç–∏–ø—ã, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –∑–∞–º–æ—Ä–æ–∑–∫–∞, —Å–ø–∏—Å–∞–Ω–∏–µ
- **–ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å** - –æ—Ç–º–µ—Ç–∫–∞, –∂—É—Ä–Ω–∞–ª, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **–õ–∏–¥—ã** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏
- **–≠–∫—Å–ø–æ—Ä—Ç** - PDF/Excel –æ—Ç—á–µ—Ç—ã
- **Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –ø–ª–∞—Ç–µ–∂–∏, –ø—Ä–æ–ø—É—Å–∫–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go 1.21+
- PostgreSQL 15+
- Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:**
```bash
cd backend
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
go mod download
```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL (—á–µ—Ä–µ–∑ Docker):**
```bash
docker-compose up -d
```

4. **–°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª:**
```bash
cp .env.example .env
```

5. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ .env:**
```env
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=classmate_central
DB_SSLMODE=disable

JWT_SECRET=your-secret-key-change-in-production
JWT_EXPIRATION=24h
JWT_REFRESH_EXPIRATION=168h

SERVER_PORT=8080
FRONTEND_URL=http://localhost:5173
ENV=development

# Email (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your-email@example.com
SMTP_PASSWORD=your-password
SMTP_FROM_EMAIL=noreply@example.com
```

6. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
```bash
go run cmd/api/main.go
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:8080`

## üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Ñ–∞–π–ª–∞—Ö:

- **[API_DOCUMENTATION.md](./API_DOCUMENTATION.md)** - –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ—Ö endpoints
- **[openapi.yaml](./openapi.yaml)** - OpenAPI 3.0 —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
- **[MOBILE_API_CHECKLIST.md](./MOBILE_API_CHECKLIST.md)** - –ß–µ–∫–ª–∏—Å—Ç –ø–æ–∫—Ä—ã—Ç–∏—è API –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ OpenAPI Generator –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤:

**Swift (iOS):**
```bash
openapi-generator generate -i openapi.yaml -g swift5 -o ./mobile-client-ios
```

**Kotlin (Android):**
```bash
openapi-generator generate -i openapi.yaml -g kotlin -o ./mobile-client-android
```

**TypeScript (Web):**
```bash
openapi-generator generate -i openapi.yaml -g typescript-axios -o ./web-client
```

## üîå API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- `POST /api/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/auth/login` - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `POST /api/auth/refresh` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞
- `POST /api/auth/verify-email` - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email
- `POST /api/auth/resend-verification` - –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞
- `POST /api/auth/accept-invite` - –ü—Ä–∏–Ω—è—Ç–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- `GET /api/auth/me` - –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∑–∞—â–∏—â–µ–Ω–æ)
- `GET /api/auth/users` - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤–∞)
- `POST /api/auth/invite` - –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤–∞)

### –°—Ç—É–¥–µ–Ω—Ç—ã

- `GET /api/students` - –°–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ (–ø–∞–≥–∏–Ω–∞—Ü–∏—è, –ø–æ–∏—Å–∫)
- `GET /api/students/:id` - –î–µ—Ç–∞–ª–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞
- `POST /api/students` - –°–æ–∑–¥–∞—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞
- `PUT /api/students/:id` - –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞
- `DELETE /api/students/:id` - –£–¥–∞–ª–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞
- `GET /api/students/:id/activities` - –ò—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- `GET /api/students/:id/notes` - –ó–∞–º–µ—Ç–∫–∏ –æ —Å—Ç—É–¥–µ–Ω—Ç–µ
- `POST /api/students/:id/notes` - –î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É
- `GET /api/students/:id/attendance` - –ñ—É—Ä–Ω–∞–ª –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
- `GET /api/students/:id/notifications` - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å—Ç—É–¥–µ–Ω—Ç–∞
- `GET /api/students/:id/discounts` - –°–∫–∏–¥–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞

### –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏

- `GET /api/teachers` - –°–ø–∏—Å–æ–∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π
- `GET /api/teachers/:id` - –î–µ—Ç–∞–ª–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
- `POST /api/teachers` - –°–æ–∑–¥–∞—Ç—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
- `PUT /api/teachers/:id` - –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
- `DELETE /api/teachers/:id` - –£–¥–∞–ª–∏—Ç—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è

### –ì—Ä—É–ø–ø—ã

- `GET /api/groups` - –°–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø
- `GET /api/groups/:id` - –î–µ—Ç–∞–ª–∏ –≥—Ä—É–ø–ø—ã
- `POST /api/groups` - –°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É
- `PUT /api/groups/:id` - –û–±–Ω–æ–≤–∏—Ç—å –≥—Ä—É–ø–ø—É
- `DELETE /api/groups/:id` - –£–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É
- `POST /api/groups/:id/generate-lessons` - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —É—Ä–æ–∫–∏
- `POST /api/groups/:id/extend` - –ü—Ä–æ–¥–ª–∏—Ç—å –≥—Ä—É–ø–ø—É

### –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ (Lessons)

- `GET /api/lessons` - –í—Å–µ —É—Ä–æ–∫–∏ (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º)
- `GET /api/lessons/:id` - –î–µ—Ç–∞–ª–∏ —É—Ä–æ–∫–∞
- `GET /api/lessons/individual` - –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —É—Ä–æ–∫–∏
- `GET /api/lessons/teacher/:teacherId` - –£—Ä–æ–∫–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
- `POST /api/lessons` - –°–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫
- `POST /api/lessons/bulk` - –ú–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —É—Ä–æ–∫–æ–≤
- `PUT /api/lessons/:id` - –û–±–Ω–æ–≤–∏—Ç—å —É—Ä–æ–∫
- `DELETE /api/lessons/:id` - –£–¥–∞–ª–∏—Ç—å —É—Ä–æ–∫
- `POST /api/lessons/check-conflicts` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã

### –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å (Attendance)

- `POST /api/attendance` - –û—Ç–º–µ—Ç–∏—Ç—å –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å
- `GET /api/attendance/lesson/:lessonId` - –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å –ø–æ —É—Ä–æ–∫—É
- `GET /api/attendance/student/:studentId` - –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞

### –§–∏–Ω–∞–Ω—Å—ã

- `GET /api/payments/transactions` - –í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `GET /api/payments/transactions/student/:studentId` - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞
- `POST /api/payments/transactions` - –°–æ–∑–¥–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
- `PUT /api/payments/transactions/:id` - –û–±–Ω–æ–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
- `GET /api/payments/balance/:studentId` - –ë–∞–ª–∞–Ω—Å —Å—Ç—É–¥–µ–Ω—Ç–∞
- `GET /api/payments/balances` - –í—Å–µ –±–∞–ª–∞–Ω—Å—ã
- `GET /api/debts` - –î–æ–ª–≥–∏ (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É)
- `GET /api/debts/student/:studentId` - –î–æ–ª–≥–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞
- `POST /api/debts` - –°–æ–∑–¥–∞—Ç—å –¥–æ–ª–≥
- `PUT /api/debts/:id` - –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–ª–≥
- `DELETE /api/debts/:id` - –£–¥–∞–ª–∏—Ç—å –¥–æ–ª–≥
- `GET /api/tariffs` - –¢–∞—Ä–∏—Ñ—ã
- `GET /api/discounts` - –°–∫–∏–¥–∫–∏

### –ê–±–æ–Ω–µ–º–µ–Ω—Ç—ã (Subscriptions)

- `GET /api/subscriptions` - –í—Å–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç—ã
- `GET /api/subscriptions/student/:studentId` - –ê–±–æ–Ω–µ–º–µ–Ω—Ç—ã —Å—Ç—É–¥–µ–Ω—Ç–∞
- `GET /api/subscriptions/:id` - –î–µ—Ç–∞–ª–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞
- `POST /api/subscriptions` - –°–æ–∑–¥–∞—Ç—å –∞–±–æ–Ω–µ–º–µ–Ω—Ç
- `PUT /api/subscriptions/:id` - –û–±–Ω–æ–≤–∏—Ç—å –∞–±–æ–Ω–µ–º–µ–Ω—Ç
- `DELETE /api/subscriptions/:id` - –£–¥–∞–ª–∏—Ç—å –∞–±–æ–Ω–µ–º–µ–Ω—Ç
- `POST /api/subscriptions/:id/freeze` - –ó–∞–º–æ—Ä–æ–∑–∏—Ç—å –∞–±–æ–Ω–µ–º–µ–Ω—Ç
- `GET /api/subscriptions/:id/freezes` - –ò—Å—Ç–æ—Ä–∏—è –∑–∞–º–æ—Ä–æ–∑–æ–∫

### –≠–∫—Å–ø–æ—Ä—Ç

- `GET /api/export/transactions/pdf` - –≠–∫—Å–ø–æ—Ä—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ PDF
- `GET /api/export/transactions/excel` - –≠–∫—Å–ø–æ—Ä—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ Excel
- `GET /api/export/students/pdf` - –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –≤ PDF
- `GET /api/export/students/excel` - –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –≤ Excel
- `GET /api/export/schedule/pdf` - –≠–∫—Å–ø–æ—Ä—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≤ PDF
- `GET /api/export/schedule/excel` - –≠–∫—Å–ø–æ—Ä—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≤ Excel

### –î–∞—à–±–æ—Ä–¥

- `GET /api/dashboard/stats` - –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /api/dashboard/today-lessons` - –£—Ä–æ–∫–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
- `GET /api/dashboard/revenue-chart` - –ì—Ä–∞—Ñ–∏–∫ –¥–æ—Ö–æ–¥–æ–≤
- `GET /api/dashboard/attendance-stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏

### RBAC (–†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞)

- `GET /api/permissions` - –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–∞–≤–∞
- `GET /api/roles` - –í—Å–µ —Ä–æ–ª–∏ –∫–æ–º–ø–∞–Ω–∏–∏
- `GET /api/roles/:id` - –î–µ—Ç–∞–ª–∏ —Ä–æ–ª–∏
- `POST /api/roles` - –°–æ–∑–¥–∞—Ç—å —Ä–æ–ª—å
- `PUT /api/roles/:id` - –û–±–Ω–æ–≤–∏—Ç—å —Ä–æ–ª—å
- `DELETE /api/roles/:id` - –£–¥–∞–ª–∏—Ç—å —Ä–æ–ª—å
- `GET /api/users/:userId/roles` - –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/users/roles/assign` - –ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª—å
- `POST /api/users/roles/remove` - –£–¥–∞–ª–∏—Ç—å —Ä–æ–ª—å

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏

- `GET /api/settings` - –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `PUT /api/settings` - –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### Health Checks

- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–µ—Ä–∞
- `GET /ready` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (readiness probe)

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ú–∏–≥—Ä–∞—Ü–∏–∏

–ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞. –°–º. [migrations/README.md](./migrations/README.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

- `users` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- `companies` - –ö–æ–º–ø–∞–Ω–∏–∏ (–º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å)
- `roles` - –†–æ–ª–∏
- `permissions` - –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- `user_roles` - –°–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ä–æ–ª–µ–π
- `teachers` - –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏
- `students` - –°—Ç—É–¥–µ–Ω—Ç—ã
- `groups` - –ì—Ä—É–ø–ø—ã
- `lessons` - –£—Ä–æ–∫–∏
- `lesson_attendance` - –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å
- `payment_transactions` - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `student_balance` - –ë–∞–ª–∞–Ω—Å—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
- `debt_records` - –î–æ–ª–≥–∏
- `student_subscriptions` - –ê–±–æ–Ω–µ–º–µ–Ω—Ç—ã
- `subscription_types` - –¢–∏–ø—ã –∞–±–æ–Ω–µ–º–µ–Ω—Ç–æ–≤
- `notifications` - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `student_activity_log` - –ò—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- `student_notes` - –ó–∞–º–µ—Ç–∫–∏ –æ —Å—Ç—É–¥–µ–Ω—Ç–∞—Ö

## üèó –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
backend/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ api/
‚îÇ       ‚îî‚îÄ‚îÄ main.go          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ handlers/            # HTTP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth_handler.go
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ student_handler.go
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment_handler.go
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ repository/           # –°–ª–æ–π –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ student_repository.go
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment_repository.go
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ services/             # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ email_service.go
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ export_service.go
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ attendance_service.go
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ models/               # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models.go
‚îÇ   ‚îú‚îÄ‚îÄ middleware/           # Middleware
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.go          # JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rbac.go          # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ company.go       # –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ database/             # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database.go
‚îÇ   ‚îú‚îÄ‚îÄ validation/           # –í–∞–ª–∏–¥–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validator.go
‚îÇ   ‚îî‚îÄ‚îÄ logger/              # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ       ‚îî‚îÄ‚îÄ logger.go
‚îú‚îÄ‚îÄ migrations/               # SQL –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ 001_init_schema.up.sql
‚îÇ   ‚îú‚îÄ‚îÄ 002_leads_and_rooms.up.sql
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ docker-compose.yml       # PostgreSQL –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ Dockerfile               # Production –æ–±—Ä–∞–∑
‚îî‚îÄ‚îÄ README.md               # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ endpoints —Ç—Ä–µ–±—É—é—Ç JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:
```
Authorization: Bearer <access_token>
```

### RBAC

–ö–∞–∂–¥—ã–π endpoint –∑–∞—â–∏—â–µ–Ω –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞. –ü—Ä–∞–≤–∞ –∏–º–µ—é—Ç —Ñ–æ—Ä–º–∞—Ç:
```
<resource>:<action>
```

–ù–∞–ø—Ä–∏–º–µ—Ä:
- `students:view` - –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
- `students:create` - —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
- `finance:transactions` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏

### –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å

–í—Å–µ –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–æ–ª–∏—Ä—É—é—Ç—Å—è –ø–æ `company_id`. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ —Å–≤–æ–µ–π –∫–æ–º–ø–∞–Ω–∏–∏.

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Zap:

```go
logger.Info("User logged in", zap.String("email", email))
logger.Error("Failed to create student", logger.ErrorField(err))
```

–õ–æ–≥–∏ –≤–∫–ª—é—á–∞—é—Ç:
- Request ID –¥–ª—è —Ç—Ä–µ–π—Å–∏–Ω–≥–∞
- User ID –∏ Company ID
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

## üß™ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
go run cmd/api/main.go
```

### –°–±–æ—Ä–∫–∞

```bash
go build -o bin/api cmd/api/main.go
```

### –ó–∞–ø—É—Å–∫ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞

```bash
./bin/api
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
go test ./...
```

### –õ–∏–Ω—Ç–∏–Ω–≥

```bash
golangci-lint run
```

## üê≥ Docker

### Development

```bash
docker-compose up -d
```

### Production

```bash
docker build -t smartcrm-backend .
docker run -p 8080:8080 --env-file .env smartcrm-backend
```

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- `github.com/gin-gonic/gin` - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- `github.com/lib/pq` - PostgreSQL –¥—Ä–∞–π–≤–µ—Ä
- `github.com/golang-jwt/jwt/v5` - JWT
- `go.uber.org/zap` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- `github.com/jung-kurt/gofpdf/v2` - PDF –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- `github.com/xuri/excelize/v2` - Excel –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

## üîß Environment Variables

–°–º. `.env.example` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [API Documentation](./API_DOCUMENTATION.md)
- [OpenAPI Spec](./openapi.yaml)
- [Migrations Guide](./migrations/README.md)
- [Fonts Setup](./FONTS_README.md) - –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã –≤ PDF

## ü§ù Contributing

1. –°–æ–∑–¥–∞–π—Ç–µ feature branch
2. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã
4. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìù License

MIT License
